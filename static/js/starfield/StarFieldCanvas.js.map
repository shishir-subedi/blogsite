{"version":3,"sources":["webpack://StarFieldCanvas/webpack/bootstrap","webpack://StarFieldCanvas/./node_modules/anim-loop-engine/lib/index.js","webpack://StarFieldCanvas/./node_modules/map-number-to-range/lib/index.js","webpack://StarFieldCanvas/./src/starColor.ts","webpack://StarFieldCanvas/./src/Star.ts","webpack://StarFieldCanvas/./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","AnimLoopEngine","this","animate","frameReqId","frameTasks","lastFrameTaskId","loop","ts","numTasks","length","fn","requestAnimationFrame","addTasks","task","tasks","createdIds","forEach","push","id","taskId","filter","debugInterval","cancelAnimationFrame","mapNumberToRange","input","inputRangeMin","inputRangeMax","outputRangeMin","outputRangeMax","defaultColor","b","g","Star","opts","x","y","z","v","radius","lastX","lastY","splashLimitX","splashLimitY","ctx","W","H","hW","hH","minV","maxV","color","glow","trails","reset","getInitialZ","draw","offsetX","offsetY","newX","newY","maxZ","newRadius","opacity","Math","round","trailOpacity","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","save","shadowBlur","shadowColor","fillStyle","arc","PI","fill","restore","init","random","Number","toPrecision","StarField","canvasId","_this","defaultMaxV","defaultMinV","defaultNumStars","initialized","canvasW","canvasH","canvasHalfW","canvasHalfH","offsetTX","offsetTY","stars","resizeTimeout","numStars","canvas","document","getElementById","getContext","rect","getBoundingClientRect","canvasRectLeft","left","canvasRectTop","top","followContext","handleMouseMove","engine","addTask","window","addEventListener","stop","start","clearTimeout","setTimeout","abs","setupCanvas","generateStars","followMouse","setFollowMouse","canvasStyle","getComputedStyle","setAttribute","height","width","translate","clearRect","e","clientX","clientY","resetMouseOffset","setMaxV","val","setMinV","setNumStars","removeEventListener"],"mappings":"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","file":"StarFieldCanvas.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\r\n * Simple boilerplate avoidance class for requestAnimationFrame looping\r\n * which runs an array of tasks you specify for frame. It's not clever -\r\n * it assumes you're keeping your frame tasks fast.\r\n */\r\nexport class AnimLoopEngine {\r\n    constructor() {\r\n        this.animate = false;\r\n        this.frameReqId = 0;\r\n        this.frameTasks = [];\r\n        this.lastFrameTaskId = 0;\r\n        this.loop = (ts = 0) => {\r\n            const numTasks = this.frameTasks.length;\r\n            for (let i = 0; i < numTasks; i++) {\r\n                this.frameTasks[i].fn(ts);\r\n            }\r\n            this.frameReqId = requestAnimationFrame(this.loop);\r\n        };\r\n        this.addTasks = this.addTasks.bind(this);\r\n    }\r\n    addTask(task) {\r\n        return this.addTasks([task])[0];\r\n    }\r\n    addTasks(tasks) {\r\n        const createdIds = [];\r\n        if (tasks.length == 0) {\r\n            return createdIds;\r\n        }\r\n        tasks.forEach(task => {\r\n            this.frameTasks.push({ id: this.lastFrameTaskId, fn: task });\r\n            createdIds.push(this.lastFrameTaskId);\r\n            this.lastFrameTaskId++;\r\n        });\r\n        return createdIds;\r\n    }\r\n    deleteTask(taskId) {\r\n        this.frameTasks = this.frameTasks.filter(t => t.id !== taskId);\r\n    }\r\n    start(debugInterval) {\r\n        if (!this.animate) {\r\n            this.animate = true;\r\n            this.loop();\r\n        }\r\n    }\r\n    stop() {\r\n        cancelAnimationFrame(this.frameReqId);\r\n        this.animate = false;\r\n    }\r\n}\r\n//# sourceMappingURL=index.js.map","// Scale a number, mapping between two number ranges\r\nexport const mapNumberToRange = (input, inputRangeMin, inputRangeMax, outputRangeMin, outputRangeMax) => {\r\n    return ((input - inputRangeMin) * (outputRangeMax - outputRangeMin) /\r\n        (inputRangeMax - inputRangeMin) +\r\n        outputRangeMin);\r\n};\r\n//# sourceMappingURL=index.js.map","export var defaultColor = {\r\n    r: 255,\r\n    b: 255,\r\n    g: 255\r\n};\r\n","import { mapNumberToRange } from 'map-number-to-range';\r\nimport { defaultColor } from './starColor';\r\nvar Star = /** @class */ (function () {\r\n    function Star(opts) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n        this.v = 0;\r\n        this.radius = 0;\r\n        this.lastX = 0;\r\n        this.lastY = 0;\r\n        this.splashLimitX = [0, 0];\r\n        this.splashLimitY = [0, 0];\r\n        var ctx = opts.ctx, W = opts.W, H = opts.H, hW = opts.hW, hH = opts.hH, minV = opts.minV, maxV = opts.maxV, color = opts.color, glow = opts.glow, trails = opts.trails, addTasks = opts.addTasks;\r\n        this.ctx = ctx;\r\n        this.W = W;\r\n        this.H = H;\r\n        this.hW = hW;\r\n        this.hH = hH;\r\n        this.minV = minV;\r\n        this.maxV = maxV;\r\n        this.glow = glow;\r\n        this.trails = trails;\r\n        this.color = color ? color : defaultColor;\r\n        this.splashLimitX = [-hW, hW];\r\n        this.splashLimitY = [-hH, hH];\r\n        this.addTasks = addTasks;\r\n        this.reset(true);\r\n    }\r\n    // Get the star's initial Z depth\r\n    Star.prototype.getInitialZ = function () {\r\n        return (this.W > this.H ? this.H : this.W) * 2;\r\n    };\r\n    // Calculate the star's current position star at the current\r\n    Star.prototype.draw = function (offsetX, offsetY) {\r\n        this.z -= this.v;\r\n        if (this.z <= 0) {\r\n            // Start of attempting to add bursts on \"collision\" with the viewport \r\n            // if (\r\n            //   this.lastX > this.splashLimitX[0] &&\r\n            //   this.lastX < this.splashLimitX[1] &&\r\n            //   this.lastY > this.splashLimitY[0] &&\r\n            //   this.lastY < this.splashLimitY[1]\r\n            // ) {\r\n            //   console.log(this.lastX, this.splashLimitX, this.lastY, this.splashLimitY);\r\n            //   const ex = new Explosion({ ctx: this.ctx, x: this.x, y: this.y });\r\n            //   this.addTasks([ex.draw.bind(ex)]);\r\n            // }\r\n            this.reset();\r\n        }\r\n        // Update x and y - 0.8 is an arbitrary fraction of the\r\n        var newX = this.W * (this.x / this.z) - offsetX;\r\n        var newY = this.H * (this.y / this.z) - offsetY;\r\n        // Get max Z and calc new radius/opacity based on star's position in Z range\r\n        var maxZ = this.getInitialZ();\r\n        // Calculate a new radius based on Z\r\n        var newRadius = (1 - mapNumberToRange(this.z, 0, maxZ, 0, 1)) * this.radius;\r\n        // Calculate a new opacity based on Z\r\n        var opacity = Math.round(10 - mapNumberToRange(this.z, 0, maxZ, 0, 10)) / 10;\r\n        var trailOpacity = opacity / 4;\r\n        // Draw star trail\r\n        if (this.trails && this.lastX !== this.x) {\r\n            this.ctx.lineWidth = newRadius;\r\n            this.ctx.strokeStyle = \"rgba(\" + this.color.r + \", \" + this.color.g + \", \" + this.color.b + \", \" + trailOpacity + \")\";\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(newX, newY);\r\n            this.ctx.lineTo(this.lastX, this.lastY);\r\n            this.ctx.stroke();\r\n        }\r\n        // Save drawing settings to restore after applying the glow to stars only\r\n        if (this.glow) {\r\n            this.ctx.save();\r\n            this.ctx.shadowBlur = 5;\r\n            this.ctx.shadowColor = '#FFF';\r\n        }\r\n        // Draw the star\r\n        this.ctx.fillStyle = \"rgb(\" + this.color.r + \", \" + this.color.g + \", \" + this.color.b + \", \" + opacity + \")\";\r\n        this.ctx.beginPath();\r\n        this.ctx.arc(newX, newY, newRadius, 0, Math.PI * 2);\r\n        this.ctx.fill();\r\n        // Undo glow settings\r\n        if (this.glow) {\r\n            this.ctx.restore();\r\n        }\r\n        // Update last x/y\r\n        this.lastX = newX;\r\n        this.lastY = newY;\r\n    };\r\n    // (Re)set the star, either initially (init) or when reaching the depth limit\r\n    Star.prototype.reset = function (init) {\r\n        if (init === void 0) { init = false; }\r\n        // Define a new random position within the canvas, velocity, and radius\r\n        this.x = Math.random() * this.W - this.hW;\r\n        this.y = Math.random() * this.H - this.hH;\r\n        this.v = Math.random() * (this.maxV - this.minV) + this.minV;\r\n        this.radius = Number((Math.random() * 2 + 1).toPrecision(3));\r\n        // Clear last x/y so we don't draw a trail from end to new reset location\r\n        this.lastX = this.x;\r\n        this.lastY = this.y;\r\n        // If not init (ie. not first run), send to furthest Z, otherwise randomize\r\n        this.z = !init ? this.getInitialZ() : Math.random() * this.getInitialZ();\r\n    };\r\n    return Star;\r\n}());\r\nexport { Star };\r\n","import { AnimLoopEngine } from 'anim-loop-engine';\r\nimport { Star } from './Star';\r\nimport { defaultColor } from './starColor';\r\n// StarField factory\r\nvar StarField = /** @class */ (function () {\r\n    function StarField(canvasId, opts) {\r\n        var _this = this;\r\n        if (opts === void 0) { opts = {}; }\r\n        this.defaultMaxV = 5;\r\n        this.defaultMinV = 2;\r\n        this.defaultNumStars = 400;\r\n        this.initialized = false;\r\n        this.canvasW = 0;\r\n        this.canvasH = 0;\r\n        this.canvasHalfW = 0;\r\n        this.canvasHalfH = 0;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.offsetTX = 0;\r\n        this.offsetTY = 0;\r\n        this.stars = [];\r\n        this.resizeTimeout = 0;\r\n        if (!canvasId) {\r\n            throw 'First argument \"id\" is required';\r\n            return;\r\n        }\r\n        this.color = opts.color || defaultColor;\r\n        this.glow = opts.glow || false;\r\n        this.minV = opts.minV || this.defaultMinV;\r\n        this.maxV = opts.maxV || this.defaultMaxV;\r\n        this.numStars = this.defaultNumStars;\r\n        this.trails = opts.trails || false;\r\n        this.canvas = document.getElementById(canvasId);\r\n        this.ctx = this.canvas.getContext('2d');\r\n        var rect = this.canvas.getBoundingClientRect();\r\n        this.canvasRectLeft = rect.left;\r\n        this.canvasRectTop = rect.top;\r\n        // Assign follow context now that this.canvas was assigned\r\n        this.followContext = opts.followContext || this.canvas;\r\n        this.handleMouseMove = this.handleMouseMove.bind(this);\r\n        // Set up animation engine\r\n        this.engine = new AnimLoopEngine();\r\n        this.engine.addTask(this.draw.bind(this));\r\n        // Set up window events\r\n        // Window blur/focus\r\n        window.addEventListener('blur', function () {\r\n            _this.stop();\r\n        });\r\n        window.addEventListener('focus', function () {\r\n            _this.start();\r\n        });\r\n        // Window event - on resize to reinitialize canvas, all stars and animation\r\n        window.addEventListener('resize', function () {\r\n            clearTimeout(_this.resizeTimeout);\r\n            _this.stop();\r\n            _this.resizeTimeout = setTimeout(function () {\r\n                _this.reset();\r\n                _this.start();\r\n            }, 500);\r\n        });\r\n        // Did config set a number of stars?\r\n        this.numStars = opts.numStars\r\n            ? Math.abs(opts.numStars)\r\n            : this.defaultNumStars;\r\n        // Setup the canvas\r\n        this.setupCanvas();\r\n        // Gen new stars\r\n        this.generateStars();\r\n        this.initialized = true;\r\n        // Did config enable mouse following?\r\n        if (opts.followMouse) {\r\n            this.setFollowMouse(true);\r\n        }\r\n    }\r\n    // Generate n new stars\r\n    StarField.prototype.generateStars = function () {\r\n        for (var i = 0; i < this.numStars; i++) {\r\n            this.stars.push(new Star({\r\n                ctx: this.ctx,\r\n                W: this.canvasW,\r\n                H: this.canvasH,\r\n                hW: this.canvasHalfW,\r\n                hH: this.canvasHalfH,\r\n                minV: this.minV,\r\n                maxV: this.maxV,\r\n                color: this.color,\r\n                glow: this.glow,\r\n                trails: this.trails,\r\n                addTasks: this.engine.addTasks\r\n            }));\r\n        }\r\n    };\r\n    // Apply canvas container size to canvas and translate origin to center\r\n    StarField.prototype.setupCanvas = function () {\r\n        var canvasStyle = window.getComputedStyle(this.canvas);\r\n        this.canvas.setAttribute('height', canvasStyle.height);\r\n        this.canvas.setAttribute('width', canvasStyle.width);\r\n        // canvasH/W/canvasHalfH/W used here and set to use elsewhere\r\n        this.canvasH = this.canvas.height;\r\n        this.canvasW = this.canvas.width;\r\n        this.canvasHalfH = this.canvasH / 2;\r\n        this.canvasHalfW = this.canvasW / 2;\r\n        this.ctx.translate(this.canvasHalfW, this.canvasHalfH);\r\n    };\r\n    // Draw the stars in this frame\r\n    StarField.prototype.draw = function () {\r\n        // Adjust offsets closer to target offset\r\n        if (this.offsetX !== this.offsetTX) {\r\n            this.offsetX += (this.offsetTX - this.offsetX) * 0.02;\r\n            this.offsetY += (this.offsetTY - this.offsetY) * 0.02;\r\n        }\r\n        // Clear the canvas ready for this frame\r\n        this.ctx.clearRect(-this.canvasHalfW, -this.canvasHalfH, this.canvasW, this.canvasH);\r\n        for (var i in this.stars) {\r\n            this.stars[i].draw(this.offsetX, this.offsetY);\r\n        }\r\n    };\r\n    // Follow mouse (used in event listener definition)\r\n    StarField.prototype.handleMouseMove = function (e) {\r\n        if (this.initialized) {\r\n            this.offsetTX = e.clientX - this.canvasRectLeft - this.canvasHalfW;\r\n            this.offsetTY = e.clientY - this.canvasRectTop - this.canvasHalfH;\r\n        }\r\n    };\r\n    StarField.prototype.resetMouseOffset = function () {\r\n        this.offsetTX = 0;\r\n        this.offsetTY = 0;\r\n    };\r\n    // Start/stop the StarField\r\n    StarField.prototype.start = function () {\r\n        this.engine.start();\r\n    };\r\n    StarField.prototype.stop = function () {\r\n        this.engine.stop();\r\n    };\r\n    StarField.prototype.reset = function () {\r\n        // Clear stars\r\n        this.stars = [];\r\n        // Reset canvas\r\n        this.setupCanvas();\r\n        // Gen new stars\r\n        this.generateStars();\r\n    };\r\n    // \"Hot\"-updateable config values\r\n    StarField.prototype.setMaxV = function (val) {\r\n        this.maxV = val ? Math.abs(val) : this.defaultMaxV;\r\n        this.reset();\r\n    };\r\n    StarField.prototype.setMinV = function (val) {\r\n        this.minV = val ? Math.abs(val) : this.defaultMinV;\r\n        this.reset();\r\n    };\r\n    StarField.prototype.setNumStars = function (val) {\r\n        this.numStars = val ? Math.abs(val) : this.defaultNumStars;\r\n        this.reset();\r\n    };\r\n    StarField.prototype.setFollowMouse = function (val) {\r\n        if (val) {\r\n            this.followContext.addEventListener('mousemove', this.handleMouseMove);\r\n        }\r\n        else {\r\n            this.followContext.removeEventListener('mousemove', this.handleMouseMove);\r\n            this.resetMouseOffset();\r\n        }\r\n    };\r\n    return StarField;\r\n}());\r\nexport { StarField };\r\n"],"sourceRoot":""}